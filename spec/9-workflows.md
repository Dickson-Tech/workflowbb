---
description: >-
  This section provides a detailed view of how this Building Block will interact
  with other Building Blocks to support common use cases.
---

# 9 Internal Workflows

The WFbb is present in multiple use cases. Use cases can be found in the [logical process blueprint](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.f0ewpzm6b55p) and a subset of those that we focus on below can be found [here](https://drive.google.com/drive/folders/1JYdcmeUhJrwl7TfSuVtBJ9a0C335VbRg). These user journeys and use cases have been referenced by the authors of the specification to ensure that the functional requirements for the spec suit the needs of the proposed implementations.

| User journey | Use-case  | Capabilities                                                                                      | Functional requirements                                            |
| ------------ | --------- | ------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| PPIC         | Promotion | CHW uses a Education Materials Database(Content Management System/Registration)                   | GET resource from external system                                  |
| PPIC         | Promotion | CHW selects some materials                                                                        | n/a                                                                |
| PPIC         | Promotion | CHW Chooses a Demographic Group (contact list) from a Demographic Registry(Registration/Registry) | GET resource from external system                                  |
| PPIC         | Promotion | Materials are sent to list of contacts from Demographic Group                                     | Initiate process of sending out mails to uploaded list of contacts |

| User journey | Use-case                                                                                                                                             | Capabilities                                                                                                                                                                                                                        | Functional requirements                                                                                                       |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| PPIC         | [Payments - Postpartum and Infant Care](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.alpzo6mzyzsw) | (Voucher Request) Validate the mother has completed all steps (visited a pediatrician, procured medicine and nutrition supplies, and visited the therapy center) by connecting to Mother and Child Tracking System (MCTS) registry. | Must be able to start a workflow process via API. Support submission of data payload through variables) in the same API call. |
| PPIC         | [Payments - Postpartum and Infant Care](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.alpzo6mzyzsw) | (Voucher Request) Verify mother has no pending incentive voucher for this milestone? (from the MCTS registry).                                                                                                                      | Perform calculation                                                                                                           |
| PPIC         | [Payments - Postpartum and Infant Care](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.alpzo6mzyzsw) | (Voucher Request) Determine payment amounts for Healthcare (HC) worker and mother.                                                                                                                                                  | Perform calculation                                                                                                           |
| PPIC         | [Payments - Postpartum and Infant Care](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.alpzo6mzyzsw) | (Voucher Request) Generate cash payment voucher (Voucher number, QR Code, the voucher serial number and its expiry date. At this point the voucher will be flagged Pre-Activated).                                                  | Make HTTP request                                                                                                             |
| PPIC         | [Payments - Postpartum and Infant Care](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.alpzo6mzyzsw) | (Payment Initiation) Submit Payments CSV file for approval and budgets (From Ministry of Health to Treasury Deparment).                                                                                                             | n/a                                                                                                                           |
| PPIC         | [Payments - Postpartum and Infant Care](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.alpzo6mzyzsw) | (Payment Initiation) (Iterate for reach record in CSV file) Verify payment details (ID Drectory Service).                                                                                                                           | Read from file, loop.                                                                                                         |
| PPIC         | [Payments - Postpartum and Infant Care](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.alpzo6mzyzsw) | (Payment Initiation) Process Payments CSV approval/rejected by Treasury.                                                                                                                                                            | Perform caculation                                                                                                            |
| PPIC         | [Payments - Postpartum and Infant Care](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.alpzo6mzyzsw) | (Payment Disbursement) Submit Payment Instruction (from Disbursement Organization - Payer) to Payment Gateway (Payments Building Block supported by Workflow Building Block in the back-end).                                       | Make HTTP request                                                                                                             |
| PPIC         | [Payments - Postpartum and Infant Care](https://docs.google.com/document/d/1DRjpuyINjf6YVBRrEh9Q6VdB0zVzq1aqGQOukpktWZ8/edit#heading=h.alpzo6mzyzsw) | (Payment Disbursement) Payment Gateway query to ID Directory Service (requesting Mobile Money provider details for mother).                                                                                                         | n/a                                                                                                                           |

| User journey | Use-case        | Capabilities                                                     | Functional requirements                                                                                                                                                                                                                 |
| ------------ | --------------- | ---------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| PPIC         | Case Management | 1. Validate client identifier (biometrics)                       | If validation requires checking with multiple other applications, this might require workflow. (Must be able to start a workflow process via API. Support submission of data payload through variables) in the same API call).          |
| PPIC         | Case Management | 3. Submit new client encounter details to case management system | If a multi-step process is required for submitting encounter details this might be handled by workflow. (Must be able to start a workflow process via API. Support submission of data payload through variables) in the same API call). |

| User journey | Use-case                                                                                                                                        | Capabilities                                                                       | Functional requirements                                                                                                                                                     |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| USCT         | [001: Eligibility Determination and Benefit Package(s) Design](https://docs.google.com/document/d/1pBr0wHt9W4boeEzCWA21TIzhetPPlA4ad3PrQHWwNcU) | Send beneficiary data from Registration Building Block to Workflow Building Block. | Must be able to start a workflow process via API. Support submission of data payload through variables) in the same API call.                                               |
| USCT         | [001: Eligibility Determination and Benefit Package(s) Design](https://docs.google.com/document/d/1pBr0wHt9W4boeEzCWA21TIzhetPPlA4ad3PrQHWwNcU) | Check if the beneficiary is above the age of 18 from National ID Registry.         | Must be able to perform an external task or similar which calls remote service (REST API). Response from Remote service should contain requested data and/or response code. |
| USCT         | [001: Eligibility Determination and Benefit Package(s) Design](https://docs.google.com/document/d/1pBr0wHt9W4boeEzCWA21TIzhetPPlA4ad3PrQHWwNcU) | Check if the beneficiary is employed from Employment Registry.                     | Must be able to perform an external task or similar which calls remote service (REST API). Response from Remote service should contain requested data and/or response code. |
| USCT         | [001: Eligibility Determination and Benefit Package(s) Design](https://docs.google.com/document/d/1pBr0wHt9W4boeEzCWA21TIzhetPPlA4ad3PrQHWwNcU) | Check if the beneficiary is receiving any income from Taxk Registry.               | Must be able to perform an external task or similar which calls remote service (REST API). Response from Remote service should contain requested data and/or response code. |

| User journey | Use-case                                                                                                                                                    | Capabilities                                                                                                             | Functional requirements       |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | ----------------------------- |
| USCT         | [001: Payment (non-electronic/cash payments)](https://docs.google.com/document/d/1uP\_v9BYDg8P7B7anRA1e-F3XLFb9MFMYbllfbYZGAhI/edit#heading=h.9l9ar3fqqo6u) | Receive trigger from Scheduling Building Block that due date has been reached.                                           | Initiate worfklow via webhook |
| USCT         | [001: Payment (non-electronic/cash payments)](https://docs.google.com/document/d/1uP\_v9BYDg8P7B7anRA1e-F3XLFb9MFMYbllfbYZGAhI/edit#heading=h.9l9ar3fqqo6u) | Load SRIS (Social Registry Information System) workload (i.e a list of eligible beneficiaries that are due for payment). | Make HTTP GET request         |
| USCT         | [001: Payment (non-electronic/cash payments)](https://docs.google.com/document/d/1uP\_v9BYDg8P7B7anRA1e-F3XLFb9MFMYbllfbYZGAhI/edit#heading=h.9l9ar3fqqo6u) | Iterate through each beneficiary and compute payment amounts due to beneficiary.                                         | Perform calculation, loop     |
| USCT         | [001: Payment (non-electronic/cash payments)](https://docs.google.com/document/d/1uP\_v9BYDg8P7B7anRA1e-F3XLFb9MFMYbllfbYZGAhI/edit#heading=h.9l9ar3fqqo6u) | Request payment for beneficiary (Payment Building Block).                                                                | Make HTTP POST request        |
| USCT         | [001: Payment (non-electronic/cash payments)](https://docs.google.com/document/d/1uP\_v9BYDg8P7B7anRA1e-F3XLFb9MFMYbllfbYZGAhI/edit#heading=h.9l9ar3fqqo6u) | Set TransactionID for successful payment and mark beneficiary as paid (Social Registry).                                 | Make HTTP POST request        |

| User journey | Use-case                                    | Capabilities                                                                                                              | Functional requirements                                            |
| ------------ | ------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ |
| USCT         | 002: Payment (non-electronic/cash payments) | Receive trigger from Scheduling Building Block that due date has been reached.                                            | Allow the initiation of an async business process via POST to API. |
| USCT         | 002: Payment (non-electronic/cash payments) | Load SRIS (Social Registry Information System) workload (i.e. a list of eligible beneficiaries that are due for payment). | Make HTTP GET request                                              |
| USCT         | 002: Payment (non-electronic/cash payments) | Request beneficiary payment details (from Social Registry).                                                               | Make HTTP GET request                                              |
| USCT         | 002: Payment (non-electronic/cash payments) | Compute payment amount for beneficiary.                                                                                   | Perform calculation                                                |
| USCT         | 002: Payment (non-electronic/cash payments) | Generate TransactionID for payment due.                                                                                   | Generate rand (execute script)                                     |
| USCT         | 002: Payment (non-electronic/cash payments) | Request payment voucher (Payment Building Block).                                                                         | Make HTTP request                                                  |
| USCT         | 002: Payment (non-electronic/cash payments) | Make voucher as paid (Payment Building Block).                                                                            | Make HTTP request                                                  |
| USCT         | 002: Payment (non-electronic/cash payments) | Mark beneficiary as paid (Social Registry).                                                                               | Make HTTP request                                                  |
